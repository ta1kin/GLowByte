# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å RabbitMQ

## üöÄ –ó–∞ 5 –º–∏–Ω—É—Ç

### 1. –ó–∞–ø—É—Å–∫ RabbitMQ

```bash
docker-compose up -d rabbitmq
```

–ü—Ä–æ–≤–µ—Ä–∫–∞: http://localhost:15672 (guest/guest)

### 2. –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è

```typescript
// –í –ª—é–±–æ–º —Å–µ—Ä–≤–∏—Å–µ
import { QueueService } from '../queue/queue.service';

// –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
await queueService.publish('data.import', {
  uploadId: 123,
  filename: 'data.csv',
  fileType: 'SUPPLIES'
});

// –ü—Ä–æ–≥–Ω–æ–∑
await queueService.publish('prediction.calculate', {
  shtabelId: 456
});

// –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
await queueService.publish('model.train', {
  modelName: 'xgboost_v1',
  modelVersion: '1.0.0',
  config: {}
});
```

### 3. Consumer –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç

Consumers –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ `OnModuleInit`.

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```typescript
// –°—Ç–∞—Ç—É—Å –∏–º–ø–æ—Ä—Ç–∞
GET /data/uploads/123

// –ü—Ä–æ–≥–Ω–æ–∑—ã
GET /predictions?shtabelId=456

// –ú–æ–¥–µ–ª–∏
GET /ml/models
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**RabbitMQ UI:** http://localhost:15672

**–ß—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å:**
- **Queues** ‚Üí –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –æ—á–µ—Ä–µ–¥–∏
- **Messages** ‚Üí –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
- **Channels** ‚Üí –∞–∫—Ç–∏–≤–Ω—ã–µ consumers

---

## ‚ö†Ô∏è –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –°–æ–æ–±—â–µ–Ω–∏–µ –∑–∞–≤–∏—Å–ª–æ –≤ –æ—á–µ—Ä–µ–¥–∏

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker logs coalfire-api`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å Consumer'–æ–≤ –≤ RabbitMQ UI
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ API: `docker restart coalfire-api`

### –°–æ–æ–±—â–µ–Ω–∏–µ –≤ DLQ

1. –û—Ç–∫—Ä–æ–π—Ç–µ DLQ –≤ RabbitMQ UI
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏—è
3. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –ø—Ä–æ–±–ª–µ–º—É
4. –ü–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ –æ—Å–Ω–æ–≤–Ω—É—é –æ—á–µ—Ä–µ–¥—å

### Consumer –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ RabbitMQ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ QueueModule –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ AppModule

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [RABBITMQ_GUIDE.md](./RABBITMQ_GUIDE.md) - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- [EXAMPLES.md](./EXAMPLES.md) - –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
- [README.md](./README.md) - –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

